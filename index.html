<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index Page</title>
</head>
<body>
    <h1>Welcome to the Protected Area</h1>
    <form id="passwordForm">
        <label for="password">Zadejte heslo:</label>
        <input type="password" id="password" required>
        <button type="submit">Odeslat</button>
    </form>

    <script>
        // Heslo je skryto zde, v praxi by se mělo kontrolovat na serveru
        const correctPassword = "tajneHeslo"; // Toto heslo by normálně mělo být na serveru

        document.getElementById('passwordForm').onsubmit = function(event) {
            event.preventDefault(); // Zabráníme defaultnímu odeslání formuláře
            const password = document.getElementById('password').value;

            // Hashování hesla
            sha256(password).then(hashedPassword => {
                // Uložení hash do localStorage
                localStorage.setItem('hashedPassword', hashedPassword);
                // Přesměrování na druhou stránku
                window.location.href = 'datamach.html';
            });
        };

        // Funkce pro hashování
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message); // Encode as (utf-8) Uint8Array
            const hashBuffer = await crypto.subtle.digest("SHA-256", msgBuffer); // Hash
            const hashArray = Array.from(new Uint8Array(hashBuffer)); // Hash jako pole bytů
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join(''); // Převeď na hex
        }
    </script>
</body>
</html>
